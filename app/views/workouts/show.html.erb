<div class="mb-4 d-flex justify-content-between align-items-center">
  <%= link_to "‚Üê –í—Å–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏", workouts_path, class: "fw-bold text-dark text-decoration-none fs-5" %>
  <div>
    <%= link_to "–†–µ–¥. –Ω–∞–∑–≤–∞–Ω–∏–µ", edit_workout_path(@workout), class: "btn btn-outline-secondary btn-sm me-2" %>
    <%= link_to "–£–¥–∞–ª–∏—Ç—å", @workout, data: { turbo_method: :delete, turbo_confirm: "–£–¥–∞–ª–∏—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?" }, class: "btn btn-danger btn-sm border-2 border-dark" %>
  </div>
</div>

<!-- –®–ê–ü–ö–ê –¢–†–ï–ù–ò–†–û–í–ö–ò -->
<div class="card p-4 mb-5 bg-warning shadow-hard">
  <h1 class="display-4 fw-black text-uppercase mb-0"><%= @workout.title %></h1>
  <p class="fs-5 fw-bold opacity-75 mb-0">üìÖ <%= @workout.date_performed.strftime("%d %B %Y") %></p>
</div>

<!-- –§–û–†–ú–ê –î–û–ë–ê–í–õ–ï–ù–ò–Ø –£–ü–†–ê–ñ–ù–ï–ù–ò–Ø -->
<div class="card p-4 mb-5" style="border-style: dashed !important;">
  <h4 class="fw-bold mb-3">‚ûï –î–æ–±–∞–≤–∏—Ç—å —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ</h4>
  
  <%= form_with(model: [@workout, WorkoutItem.new], local: true, class: "row g-3") do |f| %>
    <div class="col-md-8">
      <!-- –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ –º—ã—à—Ü–∞–º -->
      <%= f.select :exercise_id, 
          option_groups_from_collection_for_select(MuscleGroup.all, :exercises, :name, :id, :name), 
          { prompt: "–í—ã–±–µ—Ä–∏—Ç–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ..." }, 
          { class: "form-select form-select-lg fw-bold" } 
      %>
    </div>
    <div class="col-md-4">
      <%= f.submit "–î–æ–±–∞–≤–∏—Ç—å", class: "btn btn-dark w-100 h-100 fw-bold fs-5 rounded-pill" %>
    </div>
  <% end %>
</div>

<!-- –°–ü–ò–°–û–ö –£–ü–†–ê–ñ–ù–ï–ù–ò–ô -->
<% if @workout.workout_items.any? %>
  <div class="row">
    <% @workout.workout_items.each do |item| %>
      <div class="col-md-6 mb-4">
        
        <!-- –ö–ê–†–¢–û–ß–ö–ê –£–ü–†–ê–ñ–ù–ï–ù–ò–Ø -->
        <div class="card h-100 border-3 border-dark shadow-sm">
          
          <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–∞—Ä—Ç–æ—á–∫–∏ -->
          <div class="card-header bg-white border-bottom-2 border-dark d-flex justify-content-between align-items-center py-3">
            <h5 class="fw-bold m-0"><%= item.exercise.name %></h5>
            <%= link_to "–•", workout_workout_item_path(@workout, item), data: { turbo_method: :delete, turbo_confirm: "–£–±—Ä–∞—Ç—å —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ?" }, class: "text-danger fw-bold text-decoration-none fs-5" %>
          </div>

          <div class="card-body bg-light">
            
            <!-- –¢–∞–±–ª–∏—Ü–∞ –ø–æ–¥—Ö–æ–¥–æ–≤ -->
            <% if item.workout_sets.any? %>
              <table class="table table-sm border-dark mb-3" style="background: transparent !important;">
                <thead>
                  <tr>
                    <th>–ö–≥</th>
                    <th>–ü–æ–≤—Ç</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  <% item.workout_sets.each do |set| %>
                    <tr>
                      <td class="fw-bold fs-5"><%= set.weight %></td>
                      <td class="fw-bold fs-5"><%= set.reps %></td>
                      <td class="text-end">
                        <%= link_to "√ó", workout_item_workout_set_path(item, set), data: { turbo_method: :delete }, class: "text-muted text-decoration-none" %>
                      </td>
                    </tr>
                  <% end %>
                </tbody>
              </table>
            <% else %>
              <p class="text-muted small text-center mb-3">–ù–µ—Ç –ø–æ–¥—Ö–æ–¥–æ–≤</p>
            <% end %>

            <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥—Ö–æ–¥–∞ (Inline) -->
            <div class="mt-3 pt-3 border-top border-dark border-1">
              <%= form_with(model: [item, WorkoutSet.new], local: true, class: "d-flex gap-2") do |s| %>
                <%= s.number_field :weight, step: 0.5, placeholder: "–í–µ—Å", class: "form-control form-control-sm border-2 border-dark fw-bold" %>
                <%= s.number_field :reps, placeholder: "–ü–æ–≤—Ç", class: "form-control form-control-sm border-2 border-dark fw-bold" %>
                <%= s.submit "–û–ö", class: "btn btn-primary btn-sm border-2 border-dark fw-bold" %>
              <% end %>
            </div>

          </div>
        </div>

      </div>
    <% end %>
  </div>
<% else %>
  <div class="text-center text-muted py-5">
    <h3>–°–ø–∏—Å–æ–∫ –ø—É—Å—Ç ü¶ó</h3>
    <p>–î–æ–±–∞–≤—å—Ç–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ —Å–≤–µ—Ä—Ö—É.</p>
  </div>
<% end %>
